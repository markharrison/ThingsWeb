function readCookie(t){for(var i=t+"=",e=document.cookie.split(";"),n=0;n<e.length;n++){for(var M=e[n];" "===M.charAt(0);)M=M.substring(1,M.length);if(0===M.indexOf(i))return M.substring(i.length,M.length)}return null}function randomString(t){for(var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split(""),e=(t=t||Math.floor(Math.random()*i.length),""),n=0;n<t;n++)e+=i[Math.floor(Math.random()*i.length)];return e}function openNav(){$("#idnavoverlay").css("display","block"),$("#idnavsidebar").css("marginLeft","0px"),$("#idnavsidebar").css("marginRight","0px"),$("#idmaincontent").css("marginLeft","250px"),$("#idmaincontent").css("marginRight","-250px")}function closeNav(){$("#idnavsidebar").css("marginLeft","-250px"),$("#idnavsidebar").css("marginRight","250px"),$("#idmaincontent").css("marginLeft","0"),$("#idmaincontent").css("marginRight","0"),$("#idnavoverlay").css("display","none")}function toggleNav(){($("#idnavbutton").hasClass("is-active")?closeNav:openNav)(),$("#idnavbutton").toggleClass("is-active")}function gotoNav(t){toggleNav(),window.setTimeout("window.location.href='"+t+"'",500)}var gConnection=(new signalR.HubConnectionBuilder).withUrl(getThingsAPIURL()+"NotifyHub").build(),gModalThingid=-1;function doBroadcastThingUpdate(t){doIndexAlert("Thing Update",getDevNameLink(t.thingid,t.name)),UpdatePin(t.thingid,t.name,t.longitude,t.latitude,t.status),t.thingid===gModalThingid&&doIndexModal(t.thingid),doUpdateMapTime()}function doBroadcastThingDelete(t){doIndexAlert("Thing Deleted",t.thingid+"&nbsp;-&nbsp;"+t.name),DeletePin(t.thingid),doUpdateMapTime()}function doBroadcastThingDeleteAll(){doIndexAlert("Thing Deleted","All Things"),DeleteAllsPins(),doUpdateMapTime()}function doSignalRConnected(){$("#idSignalRStatus").html("Connected"),doIndexAlert("SignalR","Connect start")}function doSignalRConnectFail(){$("#idSignalRStatus").html("Disconnected"),doIndexAlert("SignalR","Connect failed"),window.setTimeout(doSignalRInitConnect,15e3)}function doSignalRInitConnect(){gConnection.start().then(function(){doSignalRConnected()}).catch(function(t){doSignalRConnectFail()})}gConnection.on("BroadcastPing",function(t,i){doIndexAlert("SignalR",t+" says "+i)}),gConnection.on("BroadcastThingUpdate",function(t){doBroadcastThingUpdate(t)}),gConnection.on("BroadcastThingDelete",function(t){doBroadcastThingDelete(t)}),gConnection.on("BroadcastThingDeleteAll",function(){doBroadcastThingDeleteAll()}),gConnection.onclose(function(t){$("#idSignalRStatus").html("Closed"),doIndexAlert("SignalR","Closed"),doSignalRInitConnect()});var gMap,gOms,greenIconUrl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIuMDAyIDUxMi4wMDIiPjxwYXRoIGQ9Ik00NDUuODQxIDIwMS40MjNjMCAxNTIuMDEyLTE3MS42MDggMjkyLjc5Ny0xNzEuNjA4IDI5Mi43OTctMTAuMDI3IDguMjI2LTI2LjQzNyA4LjIyNi0zNi40NjUgMCAwIDAtMTcxLjYwOC0xNDAuNzg1LTE3MS42MDgtMjkyLjc5NyAwLTEwNC44NDYgODQuOTk1LTE4OS44NCAxODkuODQxLTE4OS44NHMxODkuODQgODQuOTk1IDE4OS44NCAxODkuODR6IiBmaWxsPSJncmVlbiIvPjxwYXRoIGZpbGw9IiNkZGU5YWYiIGQ9Ik0yNTYuMDAxIDI5Ni45MzRjLTUyLjY2NSAwLTk1LjUxLTQyLjg0Ni05NS41MS05NS41MXM0Mi44NDYtOTUuNTEgOTUuNTEtOTUuNTEgOTUuNTEgNDIuODQ2IDk1LjUxIDk1LjUxLTQyLjg0NyA5NS41MS05NS41MSA5NS41MXoiLz48cGF0aCBkPSJNMjU2LjAwMSAwQzE0NC45MzUgMCA1NC41NzYgOTAuMzU5IDU0LjU3NiAyMDEuNDI0YzAgMzYuMzczIDkuMzg2IDc0Ljk4NyAyNy44OTYgMTE0Ljc2NyAxNC42MTYgMzEuNDA5IDM0Ljk0IDYzLjY0OSA2MC40MTEgOTUuODI2IDQzLjE3OCA1NC41NDcgODUuNzQ5IDg5LjY5MSA4Ny41NCA5MS4xNiA3LjE3MSA1Ljg4MyAxNi4zNzUgOC44MjUgMjUuNTc5IDguODI1czE4LjQwNy0yLjk0MiAyNS41NzktOC44MjVjMS43OTEtMS40NyA0NC4zNjEtMzYuNjEzIDg3LjUzOS05MS4xNiAyNS40Ny0zMi4xNzYgNDUuNzk1LTY0LjQxNiA2MC40MTEtOTUuODI2IDE4LjUxLTM5Ljc4IDI3Ljg5Ni03OC4zOTIgMjcuODk2LTExNC43NjdDNDU3LjQyNCA5MC4zNTkgMzY3LjA2NSAwIDI1Ni4wMDEgMHptOTUuMjQ2IDM5Ny4yNjhjLTQxLjY0NyA1Mi42OTctODMuOTQyIDg3LjY1My04NC4zNjEgODcuOTk3LTUuNzk5IDQuNzU4LTE1Ljk3MiA0Ljc1Ny0yMS43NjguMDAyLS40MjItLjM0Ni00Mi43MTYtMzUuMzAyLTg0LjM2My04Ny45OTktMzcuODY5LTQ3LjkxOC04My4wMTItMTIwLjc5MS04My4wMTItMTk1Ljg0NEM3Ny43NDIgMTAzLjEzMiAxNTcuNzA4IDIzLjE2NiAyNTYgMjMuMTY2czE3OC4yNTggNzkuOTY2IDE3OC4yNTggMTc4LjI1OGMwIDc1LjA1Mi00NS4xNDIgMTQ3LjkyNi04My4wMTEgMTk1Ljg0NHoiLz48cGF0aCBkPSJNMjU2LjAwMSA5NC4zMzFjLTU5LjA1MSAwLTEwNy4wOTMgNDguMDQyLTEwNy4wOTMgMTA3LjA5NCAwIDU5LjA1MSA0OC4wNDIgMTA3LjA5MyAxMDcuMDkzIDEwNy4wOTNzMTA3LjA5My00OC4wNDIgMTA3LjA5My0xMDcuMDkzYy0uMDAxLTU5LjA1Mi00OC4wNDMtMTA3LjA5NC0xMDcuMDkzLTEwNy4wOTR6bTAgMTkxLjAyYy00Ni4yNzggMC04My45MjctMzcuNjQ5LTgzLjkyNy04My45MjcgMC00Ni4yNzggMzcuNjQ5LTgzLjkyOCA4My45MjctODMuOTI4IDQ2LjI3OCAwIDgzLjkyNyAzNy42NSA4My45MjcgODMuOTI4cy0zNy42NTEgODMuOTI3LTgzLjkyNyA4My45Mjd6Ii8+PC9zdmc+",amberIconUrl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIuMDAyIDUxMi4wMDIiPjxwYXRoIGQ9Ik00NDUuODQxIDIwMS40MjNjMCAxNTIuMDEyLTE3MS42MDggMjkyLjc5Ny0xNzEuNjA4IDI5Mi43OTctMTAuMDI3IDguMjI2LTI2LjQzNyA4LjIyNi0zNi40NjUgMCAwIDAtMTcxLjYwOC0xNDAuNzg1LTE3MS42MDgtMjkyLjc5NyAwLTEwNC44NDYgODQuOTk1LTE4OS44NCAxODkuODQxLTE4OS44NHMxODkuODQgODQuOTk1IDE4OS44NCAxODkuODR6IiBmaWxsPSIjZjYwIi8+PHBhdGggZmlsbD0iI2ZjYSIgZD0iTTI1Ni4wMDEgMjk2LjkzNGMtNTIuNjY1IDAtOTUuNTEtNDIuODQ2LTk1LjUxLTk1LjUxczQyLjg0Ni05NS41MSA5NS41MS05NS41MSA5NS41MSA0Mi44NDYgOTUuNTEgOTUuNTEtNDIuODQ3IDk1LjUxLTk1LjUxIDk1LjUxeiIvPjxwYXRoIGQ9Ik0yNTYuMDAxIDBDMTQ0LjkzNSAwIDU0LjU3NiA5MC4zNTkgNTQuNTc2IDIwMS40MjRjMCAzNi4zNzMgOS4zODYgNzQuOTg3IDI3Ljg5NiAxMTQuNzY3IDE0LjYxNiAzMS40MDkgMzQuOTQgNjMuNjQ5IDYwLjQxMSA5NS44MjYgNDMuMTc4IDU0LjU0NyA4NS43NDkgODkuNjkxIDg3LjU0IDkxLjE2IDcuMTcxIDUuODgzIDE2LjM3NSA4LjgyNSAyNS41NzkgOC44MjVzMTguNDA3LTIuOTQyIDI1LjU3OS04LjgyNWMxLjc5MS0xLjQ3IDQ0LjM2MS0zNi42MTMgODcuNTM5LTkxLjE2IDI1LjQ3LTMyLjE3NiA0NS43OTUtNjQuNDE2IDYwLjQxMS05NS44MjYgMTguNTEtMzkuNzggMjcuODk2LTc4LjM5MiAyNy44OTYtMTE0Ljc2N0M0NTcuNDI0IDkwLjM1OSAzNjcuMDY1IDAgMjU2LjAwMSAwem05NS4yNDYgMzk3LjI2OGMtNDEuNjQ3IDUyLjY5Ny04My45NDIgODcuNjUzLTg0LjM2MSA4Ny45OTctNS43OTkgNC43NTgtMTUuOTcyIDQuNzU3LTIxLjc2OC4wMDItLjQyMi0uMzQ2LTQyLjcxNi0zNS4zMDItODQuMzYzLTg3Ljk5OS0zNy44NjktNDcuOTE4LTgzLjAxMi0xMjAuNzkxLTgzLjAxMi0xOTUuODQ0Qzc3Ljc0MiAxMDMuMTMyIDE1Ny43MDggMjMuMTY2IDI1NiAyMy4xNjZzMTc4LjI1OCA3OS45NjYgMTc4LjI1OCAxNzguMjU4YzAgNzUuMDUyLTQ1LjE0MiAxNDcuOTI2LTgzLjAxMSAxOTUuODQ0eiIvPjxwYXRoIGQ9Ik0yNTYuMDAxIDk0LjMzMWMtNTkuMDUxIDAtMTA3LjA5MyA0OC4wNDItMTA3LjA5MyAxMDcuMDk0IDAgNTkuMDUxIDQ4LjA0MiAxMDcuMDkzIDEwNy4wOTMgMTA3LjA5M3MxMDcuMDkzLTQ4LjA0MiAxMDcuMDkzLTEwNy4wOTNjLS4wMDEtNTkuMDUyLTQ4LjA0My0xMDcuMDk0LTEwNy4wOTMtMTA3LjA5NHptMCAxOTEuMDJjLTQ2LjI3OCAwLTgzLjkyNy0zNy42NDktODMuOTI3LTgzLjkyNyAwLTQ2LjI3OCAzNy42NDktODMuOTI4IDgzLjkyNy04My45MjggNDYuMjc4IDAgODMuOTI3IDM3LjY1IDgzLjkyNyA4My45MjhzLTM3LjY1MSA4My45MjctODMuOTI3IDgzLjkyN3oiLz48L3N2Zz4=",redIconUrl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIuMDAyIDUxMi4wMDIiPjxwYXRoIGQ9Ik00NDUuODQxIDIwMS40MjNjMCAxNTIuMDEyLTE3MS42MDggMjkyLjc5Ny0xNzEuNjA4IDI5Mi43OTctMTAuMDI3IDguMjI2LTI2LjQzNyA4LjIyNi0zNi40NjUgMCAwIDAtMTcxLjYwOC0xNDAuNzg1LTE3MS42MDgtMjkyLjc5NyAwLTEwNC44NDYgODQuOTk1LTE4OS44NCAxODkuODQxLTE4OS44NHMxODkuODQgODQuOTk1IDE4OS44NCAxODkuODR6IiBmaWxsPSJyZWQiLz48cGF0aCBkPSJNMjU2LjAwMSAyOTYuOTM0Yy01Mi42NjUgMC05NS41MS00Mi44NDYtOTUuNTEtOTUuNTFzNDIuODQ2LTk1LjUxIDk1LjUxLTk1LjUxIDk1LjUxIDQyLjg0NiA5NS41MSA5NS41MS00Mi44NDcgOTUuNTEtOTUuNTEgOTUuNTF6IiBmaWxsPSIjZmFhIi8+PHBhdGggZD0iTTI1Ni4wMDEgMEMxNDQuOTM1IDAgNTQuNTc2IDkwLjM1OSA1NC41NzYgMjAxLjQyNGMwIDM2LjM3MyA5LjM4NiA3NC45ODcgMjcuODk2IDExNC43NjcgMTQuNjE2IDMxLjQwOSAzNC45NCA2My42NDkgNjAuNDExIDk1LjgyNiA0My4xNzggNTQuNTQ3IDg1Ljc0OSA4OS42OTEgODcuNTQgOTEuMTYgNy4xNzEgNS44ODMgMTYuMzc1IDguODI1IDI1LjU3OSA4LjgyNXMxOC40MDctMi45NDIgMjUuNTc5LTguODI1YzEuNzkxLTEuNDcgNDQuMzYxLTM2LjYxMyA4Ny41MzktOTEuMTYgMjUuNDctMzIuMTc2IDQ1Ljc5NS02NC40MTYgNjAuNDExLTk1LjgyNiAxOC41MS0zOS43OCAyNy44OTYtNzguMzkyIDI3Ljg5Ni0xMTQuNzY3QzQ1Ny40MjQgOTAuMzU5IDM2Ny4wNjUgMCAyNTYuMDAxIDB6bTk1LjI0NiAzOTcuMjY4Yy00MS42NDcgNTIuNjk3LTgzLjk0MiA4Ny42NTMtODQuMzYxIDg3Ljk5Ny01Ljc5OSA0Ljc1OC0xNS45NzIgNC43NTctMjEuNzY4LjAwMi0uNDIyLS4zNDYtNDIuNzE2LTM1LjMwMi04NC4zNjMtODcuOTk5LTM3Ljg2OS00Ny45MTgtODMuMDEyLTEyMC43OTEtODMuMDEyLTE5NS44NDRDNzcuNzQyIDEwMy4xMzIgMTU3LjcwOCAyMy4xNjYgMjU2IDIzLjE2NnMxNzguMjU4IDc5Ljk2NiAxNzguMjU4IDE3OC4yNThjMCA3NS4wNTItNDUuMTQyIDE0Ny45MjYtODMuMDExIDE5NS44NDR6Ii8+PHBhdGggZD0iTTI1Ni4wMDEgOTQuMzMxYy01OS4wNTEgMC0xMDcuMDkzIDQ4LjA0Mi0xMDcuMDkzIDEwNy4wOTQgMCA1OS4wNTEgNDguMDQyIDEwNy4wOTMgMTA3LjA5MyAxMDcuMDkzczEwNy4wOTMtNDguMDQyIDEwNy4wOTMtMTA3LjA5M2MtLjAwMS01OS4wNTItNDguMDQzLTEwNy4wOTQtMTA3LjA5My0xMDcuMDk0em0wIDE5MS4wMmMtNDYuMjc4IDAtODMuOTI3LTM3LjY0OS04My45MjctODMuOTI3IDAtNDYuMjc4IDM3LjY0OS04My45MjggODMuOTI3LTgzLjkyOCA0Ni4yNzggMCA4My45MjcgMzcuNjUgODMuOTI3IDgzLjkyOHMtMzcuNjUxIDgzLjkyNy04My45MjcgODMuOTI3eiIvPjwvc3ZnPg==",gMapPins=[];function UpdateLeaftletPin(t,i,e,n,M){var M="red"===M?(a=redIconUrl,1e4):"green"===M?(a=greenIconUrl,0):(a=amberIconUrl,5e3),a=new L.Icon({iconUrl:a,iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-25]}),i=getDevNameLink(t,i);void 0===gMapPins[t]?(gMapPins[t]=L.marker([n,e]).addTo(gMap),gOms.addMarker(gMapPins[t])):gMapPins[t].setLatLng([n,e]),gMapPins[t].setIcon(a).setZIndexOffset(M).bindPopup(i)}function DeleteLeaftletPin(t){gOms.removeMarker(gMapPins[t]),gMapPins[t].remove(),delete gMapPins[t]}function SetLeafletTilesAzureMaps(){L.tileLayer("https://atlas.microsoft.com/map/tile/png?api-version=1&layer=basic&style=main&tileSize=512&zoom={z}&x={x}&y={y}&subscription-key={subscriptionKey}",{attribution:"© "+(new Date).getFullYear()+" Microsoft, © 1992 - "+(new Date).getFullYear()+" TomTom",maxZoom:18,tileSize:512,zoomOffset:-1,id:"azuremaps",crossOrigin:!0,subscriptionKey:getSK()}).addTo(gMap)}function SetLeafletTilesBingMaps(){var t=L.tileLayer.bing({imagerySet:"AerialWithLabelsOnDemand",bingMapsKey:getSK()}),i=(t.addTo(gMap),L.tileLayer.bing({imagerySet:"RoadOnDemand",bingMapsKey:getSK()})),t=(i.addTo(gMap),{Satellite:t,Roads:i});L.control.layers(t,null,{collapsed:!1}).addTo(gMap)}function CreateLeafletMap(){gMap=L.map("myMap").setView([getMapStartLat(),getMapStartLong()],getMapStartZoom()),gOms=new OverlappingMarkerSpiderfier(gMap,{keepSpiderfied:!0}),("azure"===getMapSource().toLowerCase()?SetLeafletTilesAzureMaps:SetLeafletTilesBingMaps)(),GetMapData()}function doUpdateMapTime(){var t=new Date;$("#idTimerStatus").html(t.toLocaleTimeString())}function UpdatePin(t,i,e,n,M){UpdateLeaftletPin(t,i,e,n,M)}function UpdatePins(t){for(i=0;i<t.length;i++){var e=t[i];UpdatePin(e.thingid,e.name,e.longitude,e.latitude,e.status)}}function DeletePin(t){DeleteLeaftletPin(t)}function DeleteAllsPins(){for(var t in gMapPins)DeletePin(t)}function DeleteAbsentPins(t){for(var e in gMapPins){var n=!1;for(i=0;i<t.length&&!n;i++)Number(e)===Number(t[i].thingid)&&(n=!0);n||DeletePin(e)}}function UpdateMap(t){UpdatePins(t),DeleteAbsentPins(t),doUpdateMapTime()}function GetMapData(){window.setTimeout(GetMapData,6e4);var t=getThingsAPIURL()+"api/Things/";$.ajax({url:t,type:"GET",success:function(t){UpdateMap(t)}})}function getDevNameLink(t,i){return'<a onclick="doIndexModal('+t+"); return false;\"  class='namelink' href='#"+i.replace(/ /g,"+")+"'>"+t+"&nbsp;-&nbsp;"+i+"</a>"}function doIndexAlert(t,i){var e="",n="idToast"+randomString(8);e=(e="<div id='"+n+"' class='toast fade hide'><div class='toast-header'>")+"<strong class='mr-auto'>"+t+"</strong><small class='text-muted'>"+(new Date).toLocaleTimeString()+"</small>",e=(e+="<button type='button' class='ml-2 mb-1 close' data-dismiss='toast' ><span>&times;</span></button>")+"</div><div class='toast-body'>"+i+"</div></div>",$("#idToaster").append(e),$("#"+n).on("hidden.bs.toast",function(t){$("#"+t.currentTarget.id).remove()}),$("#"+n).toast({delay:1e4}).toast("show")}function doIndexThingReset(t){var i=getThingsAPIURL()+"api/Things/"+t.thingid,e={thingid:t.thingid,name:t.name,latitude:t.latitude,longitude:t.longitude,image:"",text:"",status:"green",data:""},t=JSON.stringify(e);$.ajax({url:i,type:"PUT",contentType:"application/json",data:t,headers:{"Content-Type":"application/json",Accept:"application/json"},complete:function(t){UpdatePin(e.thingid,e.name,e.longitude,e.latitude,e.status),doIndexModal(e.thingid)}})}function doIndexThingDelete(t){var i=t.name,t=t.thingid,t=getThingsAPIURL()+"api/Things/"+t;prompt("Please enter the name '"+i+"' to confirm delete","")===i&&$.ajax({url:t,type:"DELETE",contentType:"application/json",headers:{"Content-Type":"application/json",Accept:"application/json"},complete:function(t){$("#idThingModal").modal("hide")}})}function toTitleCase(t){return t.replace(/\w+/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}function doIndexModalHidden(){history.replaceState("",document.title,location.pathname),$(".modal-title").html(""),$(".modal-body").html(""),gModalThingid=-1}function doIndexModal(a){var t=getThingsAPIURL()+"api/Things/"+a;gModalThingid=Number(a),$("#idThingModal").modal("show"),$.ajax({url:t,type:"GET",success:function(t){var i,e="red"===t.status?"#FF0000":"amber"===t.status?"#FF9933":"#80FF00",n=[];if($(".modal-title").html(t.name+"&nbsp;<svg height='30' width='30'><circle cx='15' cy='15' r='12' stroke='white' stroke-width='1' fill='"+e+"' /></svg>"),location.hash="#/"+a+"/"+t.name.replace(/ /g,"+"),n.push("Thing&nbsp;Id:&nbsp;"+t.thingid+"<br>"),n.push("Geo:&nbsp;"+t.latitude+",&nbsp;"+t.longitude+"<br>"),""!==t.text&&n.push(t.text+"<br>"),""!==t.data)try{i=JSON.parse(t.data)}catch(t){}finally{if("object"==typeof i)for(var M in i)n.push(toTitleCase(M)+":&nbsp;"+i[M]+"<br>");else n.push("Data:&nbsp;"+t.data+"<br>")}""!==t.image&&n.push("<br><div style='max-width: 400px' ><img src='"+t.image+"' style='max-width:100%;' /></div>"),$(".modal-body").html(n),$("#idButtonReset").attr("data-Thinginfo",JSON.stringify(t,["thingid","name","latitude","longitude"])),$("#idButtonDelete").attr("data-Thinginfo",JSON.stringify(t,["thingid","name"]))}})}function getHashThingid(){var t="",i=location.hash.toLowerCase(),i=("#/"===i.slice(0,2)&&(t=i.split("/")[1]),Number(t));return(isNaN(i)||i<0||1e3<i)&&(t="",history.replaceState("",document.title,location.pathname)),t}function doHashChanged(){var t=getHashThingid();""!==t&&Number(t)!==gModalThingid&&doIndexModal(t)}function initCallbacks(){$(document).ajaxError(function(t,i,e,n){var M;i.status?404===i.status?(M="Not Found - Thing: "+gModalThingid,$(".modal-title").html(""),$(".modal-body").html(M)):M="HTTP Error: "+i.status:M="Failure "+n,$("#idTimerStatus").html("AJAX Error: "+M),doIndexAlert("AJAX Error",M)}),$("#idButtonDelete").click(function(){doIndexThingDelete(JSON.parse($(this).attr("data-Thinginfo")))}),$("#idButtonReset").click(function(){doIndexThingReset(JSON.parse($(this).attr("data-Thinginfo")))}),$("#idSignalR").click(function(){gConnection.invoke("SendPing","Client","Ping").catch(function(t){return alert(t.toString())})}),$("#idThingModal").on("hide.bs.modal",function(t){doIndexModalHidden()}),$(window).on("hashchange",function(t){doHashChanged()})}function doIndexReady(){initCallbacks(),CreateLeafletMap(),doSignalRInitConnect(),$("body").removeClass("preload");var t=getHashThingid();""!==t&&doIndexModal(t)}